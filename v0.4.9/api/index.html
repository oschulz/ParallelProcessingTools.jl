<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>API · ParallelProcessingTools</title><meta name="title" content="API · ParallelProcessingTools"/><meta property="og:title" content="API · ParallelProcessingTools"/><meta property="twitter:title" content="API · ParallelProcessingTools"/><meta name="description" content="Documentation for ParallelProcessingTools."/><meta property="og:description" content="Documentation for ParallelProcessingTools."/><meta property="twitter:description" content="Documentation for ParallelProcessingTools."/><meta property="og:url" content="https://oschulz.github.io/ParallelProcessingTools.jl/stable/api/"/><meta property="twitter:url" content="https://oschulz.github.io/ParallelProcessingTools.jl/stable/api/"/><link rel="canonical" href="https://oschulz.github.io/ParallelProcessingTools.jl/stable/api/"/><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../search_index.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">ParallelProcessingTools</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li class="is-active"><a class="tocitem" href>API</a><ul class="internal"><li><a class="tocitem" href="#Modules"><span>Modules</span></a></li><li><a class="tocitem" href="#Types-and-constants"><span>Types and constants</span></a></li><li><a class="tocitem" href="#Functions-and-macros"><span>Functions and macros</span></a></li><li class="toplevel"><a class="tocitem" href="#Documentation"><span>Documentation</span></a></li></ul></li><li><a class="tocitem" href="../LICENSE/">LICENSE</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>API</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>API</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/oschulz/ParallelProcessingTools.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/oschulz/ParallelProcessingTools.jl/blob/main/docs/src/api.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="API"><a class="docs-heading-anchor" href="#API">API</a><a id="API-1"></a><a class="docs-heading-anchor-permalink" href="#API" title="Permalink"></a></h1><h2 id="Modules"><a class="docs-heading-anchor" href="#Modules">Modules</a><a id="Modules-1"></a><a class="docs-heading-anchor-permalink" href="#Modules" title="Permalink"></a></h2><ul></ul><h2 id="Types-and-constants"><a class="docs-heading-anchor" href="#Types-and-constants">Types and constants</a><a id="Types-and-constants-1"></a><a class="docs-heading-anchor-permalink" href="#Types-and-constants" title="Permalink"></a></h2><ul><li><a href="#ParallelProcessingTools.AbstractThreadLocal"><code>ParallelProcessingTools.AbstractThreadLocal</code></a></li><li><a href="#ParallelProcessingTools.AutoThreadPinning"><code>ParallelProcessingTools.AutoThreadPinning</code></a></li><li><a href="#ParallelProcessingTools.CreateNew"><code>ParallelProcessingTools.CreateNew</code></a></li><li><a href="#ParallelProcessingTools.CreateOrIgnore"><code>ParallelProcessingTools.CreateOrIgnore</code></a></li><li><a href="#ParallelProcessingTools.CreateOrModify"><code>ParallelProcessingTools.CreateOrModify</code></a></li><li><a href="#ParallelProcessingTools.CreateOrReplace"><code>ParallelProcessingTools.CreateOrReplace</code></a></li><li><a href="#ParallelProcessingTools.DynamicAddProcsMode"><code>ParallelProcessingTools.DynamicAddProcsMode</code></a></li><li><a href="#ParallelProcessingTools.FilesToRead"><code>ParallelProcessingTools.FilesToRead</code></a></li><li><a href="#ParallelProcessingTools.FilesToWrite"><code>ParallelProcessingTools.FilesToWrite</code></a></li><li><a href="#ParallelProcessingTools.FlexWorkerPool"><code>ParallelProcessingTools.FlexWorkerPool</code></a></li><li><a href="#ParallelProcessingTools.MaxTriesExceeded"><code>ParallelProcessingTools.MaxTriesExceeded</code></a></li><li><a href="#ParallelProcessingTools.ModifyExisting"><code>ParallelProcessingTools.ModifyExisting</code></a></li><li><a href="#ParallelProcessingTools.NonZeroExitCode"><code>ParallelProcessingTools.NonZeroExitCode</code></a></li><li><a href="#ParallelProcessingTools.OnHTCondor"><code>ParallelProcessingTools.OnHTCondor</code></a></li><li><a href="#ParallelProcessingTools.OnLocalhost"><code>ParallelProcessingTools.OnLocalhost</code></a></li><li><a href="#ParallelProcessingTools.OnSlurm"><code>ParallelProcessingTools.OnSlurm</code></a></li><li><a href="#ParallelProcessingTools.RunProcsMode"><code>ParallelProcessingTools.RunProcsMode</code></a></li><li><a href="#ParallelProcessingTools.ThreadLocal"><code>ParallelProcessingTools.ThreadLocal</code></a></li><li><a href="#ParallelProcessingTools.TimelimitExceeded"><code>ParallelProcessingTools.TimelimitExceeded</code></a></li><li><a href="#ParallelProcessingTools.WriteMode"><code>ParallelProcessingTools.WriteMode</code></a></li></ul><h2 id="Functions-and-macros"><a class="docs-heading-anchor" href="#Functions-and-macros">Functions and macros</a><a id="Functions-and-macros-1"></a><a class="docs-heading-anchor-permalink" href="#Functions-and-macros" title="Permalink"></a></h2><ul><li><a href="#ParallelProcessingTools.@always_everywhere-Tuple{Any}"><code>ParallelProcessingTools.@always_everywhere</code></a></li><li><a href="#ParallelProcessingTools.@critical-Tuple{Any}"><code>ParallelProcessingTools.@critical</code></a></li><li><a href="#ParallelProcessingTools.@mt_out_of_order-Tuple{Any}"><code>ParallelProcessingTools.@mt_out_of_order</code></a></li><li><a href="#ParallelProcessingTools.@onprocs-Tuple{Any, Any}"><code>ParallelProcessingTools.@onprocs</code></a></li><li><a href="#ParallelProcessingTools.@onthreads-Tuple{Any, Any}"><code>ParallelProcessingTools.@onthreads</code></a></li><li><a href="#ParallelProcessingTools.@return_exceptions-Tuple{Any}"><code>ParallelProcessingTools.@return_exceptions</code></a></li><li><a href="#ParallelProcessingTools.@userfriendly_exceptions-Tuple{Any}"><code>ParallelProcessingTools.@userfriendly_exceptions</code></a></li><li><a href="#ParallelProcessingTools.@wait_while-Tuple"><code>ParallelProcessingTools.@wait_while</code></a></li><li><a href="#ParallelProcessingTools.add_procinit_code-Tuple{Any}"><code>ParallelProcessingTools.add_procinit_code</code></a></li><li><a href="#ParallelProcessingTools.allprocs_management_lock-Tuple{}"><code>ParallelProcessingTools.allprocs_management_lock</code></a></li><li><a href="#ParallelProcessingTools.allthreads-Tuple{}"><code>ParallelProcessingTools.allthreads</code></a></li><li><a href="#ParallelProcessingTools.clear_worker_caches!"><code>ParallelProcessingTools.clear_worker_caches!</code></a></li><li><a href="#ParallelProcessingTools.current_procinit_level-Tuple{}"><code>ParallelProcessingTools.current_procinit_level</code></a></li><li><a href="#ParallelProcessingTools.default_cache_dir-Tuple{}"><code>ParallelProcessingTools.default_cache_dir</code></a></li><li><a href="#ParallelProcessingTools.default_cache_dir!-Tuple{AbstractString}"><code>ParallelProcessingTools.default_cache_dir!</code></a></li><li><a href="#ParallelProcessingTools.ensure_procinit"><code>ParallelProcessingTools.ensure_procinit</code></a></li><li><a href="#ParallelProcessingTools.ensure_procinit_or_kill"><code>ParallelProcessingTools.ensure_procinit_or_kill</code></a></li><li><a href="#ParallelProcessingTools.get_procinit_code-Tuple{}"><code>ParallelProcessingTools.get_procinit_code</code></a></li><li><a href="#ParallelProcessingTools.getallvalues"><code>ParallelProcessingTools.getallvalues</code></a></li><li><a href="#ParallelProcessingTools.getlabel"><code>ParallelProcessingTools.getlabel</code></a></li><li><a href="#ParallelProcessingTools.getlocalvalue"><code>ParallelProcessingTools.getlocalvalue</code></a></li><li><a href="#ParallelProcessingTools.global_procinit_level-Tuple{}"><code>ParallelProcessingTools.global_procinit_level</code></a></li><li><a href="#ParallelProcessingTools.hasfailed"><code>ParallelProcessingTools.hasfailed</code></a></li><li><a href="#ParallelProcessingTools.idle_sleep-Tuple{Integer, Real, Real}"><code>ParallelProcessingTools.idle_sleep</code></a></li><li><a href="#ParallelProcessingTools.in_vscode_notebook-Tuple{}"><code>ParallelProcessingTools.in_vscode_notebook</code></a></li><li><a href="#ParallelProcessingTools.inner_exception"><code>ParallelProcessingTools.inner_exception</code></a></li><li><a href="#ParallelProcessingTools.isactive"><code>ParallelProcessingTools.isactive</code></a></li><li><a href="#ParallelProcessingTools.isvalid_pid"><code>ParallelProcessingTools.isvalid_pid</code></a></li><li><a href="#ParallelProcessingTools.memory_limit"><code>ParallelProcessingTools.memory_limit</code></a></li><li><a href="#ParallelProcessingTools.memory_limit!"><code>ParallelProcessingTools.memory_limit!</code></a></li><li><a href="#ParallelProcessingTools.onlyfirst_exception"><code>ParallelProcessingTools.onlyfirst_exception</code></a></li><li><a href="#ParallelProcessingTools.onworker"><code>ParallelProcessingTools.onworker</code></a></li><li><a href="#ParallelProcessingTools.original_exception"><code>ParallelProcessingTools.original_exception</code></a></li><li><a href="#ParallelProcessingTools.ppt_cluster_manager"><code>ParallelProcessingTools.ppt_cluster_manager</code></a></li><li><a href="#ParallelProcessingTools.ppt_cluster_manager!-Tuple{ElasticClusterManager.ElasticManager}"><code>ParallelProcessingTools.ppt_cluster_manager!</code></a></li><li><a href="#ParallelProcessingTools.ppt_worker_pool-Tuple{}"><code>ParallelProcessingTools.ppt_worker_pool</code></a></li><li><a href="#ParallelProcessingTools.ppt_worker_pool!-Tuple{FlexWorkerPool}"><code>ParallelProcessingTools.ppt_worker_pool!</code></a></li><li><a href="#ParallelProcessingTools.printover-Tuple{Any, Any}"><code>ParallelProcessingTools.printover</code></a></li><li><a href="#ParallelProcessingTools.proc_management_lock-Tuple{Integer}"><code>ParallelProcessingTools.proc_management_lock</code></a></li><li><a href="#ParallelProcessingTools.read_files"><code>ParallelProcessingTools.read_files</code></a></li><li><a href="#ParallelProcessingTools.runworkers"><code>ParallelProcessingTools.runworkers</code></a></li><li><a href="#ParallelProcessingTools.sleep_ns-Tuple{Integer}"><code>ParallelProcessingTools.sleep_ns</code></a></li><li><a href="#ParallelProcessingTools.split_basename_ext-Tuple{AbstractString}"><code>ParallelProcessingTools.split_basename_ext</code></a></li><li><a href="#ParallelProcessingTools.stopworkers"><code>ParallelProcessingTools.stopworkers</code></a></li><li><a href="#ParallelProcessingTools.tmp_filename"><code>ParallelProcessingTools.tmp_filename</code></a></li><li><a href="#ParallelProcessingTools.wait_for_all"><code>ParallelProcessingTools.wait_for_all</code></a></li><li><a href="#ParallelProcessingTools.wait_for_any"><code>ParallelProcessingTools.wait_for_any</code></a></li><li><a href="#ParallelProcessingTools.whyfailed"><code>ParallelProcessingTools.whyfailed</code></a></li><li><a href="#ParallelProcessingTools.worker_local_startcmd-Tuple{Distributed.ClusterManager}"><code>ParallelProcessingTools.worker_local_startcmd</code></a></li><li><a href="#ParallelProcessingTools.worker_resources-Tuple{}"><code>ParallelProcessingTools.worker_resources</code></a></li><li><a href="#ParallelProcessingTools.worker_start_command"><code>ParallelProcessingTools.worker_start_command</code></a></li><li><a href="#ParallelProcessingTools.workpart"><code>ParallelProcessingTools.workpart</code></a></li><li><a href="#ParallelProcessingTools.wouldwait"><code>ParallelProcessingTools.wouldwait</code></a></li><li><a href="#ParallelProcessingTools.write_files"><code>ParallelProcessingTools.write_files</code></a></li><li><a href="#ParallelProcessingTools.write_worker_start_script"><code>ParallelProcessingTools.write_worker_start_script</code></a></li></ul><h1 id="Documentation"><a class="docs-heading-anchor" href="#Documentation">Documentation</a><a id="Documentation-1"></a><a class="docs-heading-anchor-permalink" href="#Documentation" title="Permalink"></a></h1><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ParallelProcessingTools.AbstractThreadLocal" href="#ParallelProcessingTools.AbstractThreadLocal"><code>ParallelProcessingTools.AbstractThreadLocal</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">abstract type AbstractThreadLocal{T} end</code></pre><p>Abstract type for thread-local values of type <code>T</code>.</p><p>The value for the current thread is accessed via <code>getindex(::AbstractThreadLocal)</code> and `setindex(::AbstractThreadLocal, x).</p><p>To access both regular and thread-local values in a unified manner, use the function <a href="#ParallelProcessingTools.getlocalvalue"><code>getlocalvalue</code></a>.</p><p>To get the all values across all threads, use the function <a href="#ParallelProcessingTools.getallvalues"><code>getallvalues</code></a>.</p><p>Default implementation is <a href="#ParallelProcessingTools.ThreadLocal"><code>ThreadLocal</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/oschulz/ParallelProcessingTools.jl/blob/4d633400545a1d4eba6cc0af8c028226b9744f74/src/threadlocal.jl#L4-L19">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ParallelProcessingTools.AutoThreadPinning" href="#ParallelProcessingTools.AutoThreadPinning"><code>ParallelProcessingTools.AutoThreadPinning</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">struct AutoThreadPinning</code></pre><p>ParallelProcessingTools default thread pinning mode.</p><p>Constructor:</p><pre><code class="language-julia hljs">AutoThreadPinning(; random::Bool = false, pin_blas::Bool = false)</code></pre><p>Arguments:</p><ul><li><p><code>random</code>: Use system topology based random thread pinning if no thread         affinity mask is set (e.g. via SLURM, <code>taskset</code>).</p></li><li><p><code>blas</code>: Try to pin BLAS threads. Not fully functional due to bugs in BLAS thread pinning (see ThreadPinning issue <a href="https://github.com/carstenbauer/ThreadPinning.jl/issues/105">#105</a>).</p></li></ul><p>Use with <code>ThreadPinning.pinthreads</code>:</p><pre><code class="language-julia hljs">using ParallelProcessingTools, ThreadPinning
pinthreads(AutoThreadPinning())</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/oschulz/ParallelProcessingTools.jl/blob/4d633400545a1d4eba6cc0af8c028226b9744f74/src/runworkers.jl#L4-L30">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ParallelProcessingTools.CreateNew" href="#ParallelProcessingTools.CreateNew"><code>ParallelProcessingTools.CreateNew</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">CreateNew() isa WriteMode</code></pre><p>Indicates that new files should be created and to throw and eror if the files already exist.</p><p>See <a href="#ParallelProcessingTools.WriteMode"><code>WriteMode</code></a> and <a href="#ParallelProcessingTools.write_files"><code>write_files</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/oschulz/ParallelProcessingTools.jl/blob/4d633400545a1d4eba6cc0af8c028226b9744f74/src/fileio.jl#L180-L187">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ParallelProcessingTools.CreateOrIgnore" href="#ParallelProcessingTools.CreateOrIgnore"><code>ParallelProcessingTools.CreateOrIgnore</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">CreateOrIgnore() isa WriteMode</code></pre><p>Indicates that new files should be created, and that nothing should be done if if the files already exist.</p><p>Causes an error to be thrown if only some of the files exist, to indicate an inconsistent state.</p><p><code>CreateOrIgnore()</code> is the recommended default when creating files in a parallel computing context, especially if failure or timeouts might result in re-tries. This way, if multiple workers try to create the same file(s), only one file or consistent set of files will be created under the target filenames.</p><p>See <a href="#ParallelProcessingTools.WriteMode"><code>WriteMode</code></a> and <a href="#ParallelProcessingTools.write_files"><code>write_files</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/oschulz/ParallelProcessingTools.jl/blob/4d633400545a1d4eba6cc0af8c028226b9744f74/src/fileio.jl#L143-L159">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ParallelProcessingTools.CreateOrModify" href="#ParallelProcessingTools.CreateOrModify"><code>ParallelProcessingTools.CreateOrModify</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">CreateOrIgnore() isa WriteMode</code></pre><p>Indicates that either new files should be created, or that existing files should be modified.</p><p>Causes an error to be thrown if only some of the files exist already, to indicate an inconsistent state.</p><p>See <a href="#ParallelProcessingTools.WriteMode"><code>WriteMode</code></a> and <a href="#ParallelProcessingTools.write_files"><code>write_files</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/oschulz/ParallelProcessingTools.jl/blob/4d633400545a1d4eba6cc0af8c028226b9744f74/src/fileio.jl#L222-L232">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ParallelProcessingTools.CreateOrReplace" href="#ParallelProcessingTools.CreateOrReplace"><code>ParallelProcessingTools.CreateOrReplace</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">CreateOrReplace() isa WriteMode</code></pre><p>Indicates that new files should be created and existing files should be replaced.</p><p>See <a href="#ParallelProcessingTools.WriteMode"><code>WriteMode</code></a> and <a href="#ParallelProcessingTools.write_files"><code>write_files</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/oschulz/ParallelProcessingTools.jl/blob/4d633400545a1d4eba6cc0af8c028226b9744f74/src/fileio.jl#L203-L210">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ParallelProcessingTools.DynamicAddProcsMode" href="#ParallelProcessingTools.DynamicAddProcsMode"><code>ParallelProcessingTools.DynamicAddProcsMode</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">abstract type ParallelProcessingTools.DynamicAddProcsMode &lt;: ParallelProcessingTools.RunProcsMode</code></pre><p>Abstract supertype for worker start modes that use an elastic cluster manager that enables dynamic addition and removal of worker processes.</p><p>Subtypes must implement:</p><ul><li><code>ParallelProcessingTools.worker_start_command(runmode::SomeDynamicAddProcsMode, manager::ClusterManager)</code></li><li><code>ParallelProcessingTools.runworkers(runmode::SomeDynamicAddProcsMode, manager::ClusterManager)</code></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/oschulz/ParallelProcessingTools.jl/blob/4d633400545a1d4eba6cc0af8c028226b9744f74/src/runworkers.jl#L173-L183">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ParallelProcessingTools.FilesToRead" href="#ParallelProcessingTools.FilesToRead"><code>ParallelProcessingTools.FilesToRead</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">struct ParallelProcessingTools.FilesToRead</code></pre><p>Created by <a href="#ParallelProcessingTools.read_files"><code>read_files</code></a>, represents a set of (temporary) files to read from.</p><p>With <code>ftr::FilesToRead</code>, use <code>collect(ftr)</code> or <code>iterate(ftr)</code> to access the filenames to read from. Use <code>close(ftr)</code> or <code>close(ftr, true)</code> to close things in good order, indicating success, and use <code>close(ftr, false)</code> or <code>close(ftr, err:Exception)</code> to abort, indicating failure.</p><p>See <a href="#ParallelProcessingTools.read_files"><code>read_files</code></a> for example code.</p><p>If aborted or if the Julia process exits without <code>ftr</code> being closed, temporary files are still cleaned up, unless <code>read_files</code> was used with <code>delete_tmp_onerror = false</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/oschulz/ParallelProcessingTools.jl/blob/4d633400545a1d4eba6cc0af8c028226b9744f74/src/fileio.jl#L601-L617">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ParallelProcessingTools.FilesToWrite" href="#ParallelProcessingTools.FilesToWrite"><code>ParallelProcessingTools.FilesToWrite</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">struct ParallelProcessingTools.FilesToWrite</code></pre><p>Created by <a href="#ParallelProcessingTools.write_files"><code>write_files</code></a>, represents a set of (temporary) files to write to.</p><p>With <code>ftw::FilesToWrite</code>, use <code>collect(ftw)</code> or <code>iterate(ftw)</code> to access the filenames to write to. Use <code>close(ftw)</code> or <code>close(ftw, true)</code> to close things in good order, indicating success, and use <code>close(ftw, false)</code> or <code>close(ftw, err:Exception)</code> to abort, indicating failure.</p><p>See <a href="#ParallelProcessingTools.write_files"><code>write_files</code></a> for example code.</p><p>If aborted or if the Julia process exits without <code>ftw</code> being closed, temporary files are still cleaned up, unless <code>write_files</code> was used with <code>delete_tmp_onerror = false</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/oschulz/ParallelProcessingTools.jl/blob/4d633400545a1d4eba6cc0af8c028226b9744f74/src/fileio.jl#L273-L289">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ParallelProcessingTools.FlexWorkerPool" href="#ParallelProcessingTools.FlexWorkerPool"><code>ParallelProcessingTools.FlexWorkerPool</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">FlexWorkerPool{WP&lt;:AbstractWorkerPool}(
    worker_pids::AbstractVector{Int};
    label::AbstractString = &quot;&quot;, maxoccupancy::Int = 1, init_workers::Bool = true
)::AbstractWorkerPool

FlexWorkerPool(; caching = false, withmyid::Bool = true, kwargs...)</code></pre><p>An flexible worker pool, intended to work with cluster managers that may add and remove Julia processes dynamically.</p><p>If the current process (<code>Distributed.myid()</code>) is part of the pool, resp. if <code>withmyid</code> is <code>true</code>, it will be used as a fallback when no other workers are in are members of the pool (e.g. because no other processes have been added yet or because all other processes in the pool have terminated and been removed from it). The current process will <em>not</em> be used as a fallback when all other workers are currently in use.</p><p>If <code>caching</code> is true, the pool will use a <code>Distributed.CachingPool</code> as the underlying pool, otherwise a <code>Distributed.WorkerPool</code>.</p><p>If <code>maxoccupancy</code>is greater than one, individual workers can be used <code>maxoccupancy</code> times in parallel. So <code>take!(pool)</code> may return the same process ID <code>pid</code> multiple times without a <code>put!(pool, pid)</code> in between. Such a (ideally moderate) oversubscription can be useful to reduce latency-related idle times on workers: e.g. if communication latency to the worker is not short compared the the runtime of the function called on them. Or if the remote functions are often blocked waiting for I/O. Note: Workers still must be put back the same number of times they were taken from the pool, in total.</p><p>If <code>init_workers</code> is <code>true</code>, workers taken from the pool will be guaranteed to be initialized to the current global initialization level (see <a href="#ParallelProcessingTools.@always_everywhere-Tuple{Any}"><code>@always_everywhere</code></a>).</p><p><code>WP</code> is the type of the underlying worker pool used, e.g. <code>Distributed.WorkerPool</code> (default) or <code>Distributed.CachingPool</code>.</p><p>Example:</p><pre><code class="language-julia hljs">using ParallelProcessingTools, Distributed

pool = FlexWorkerPool(withmyid = true, maxoccupancy = 3)

workers(pool)

pids = [take!(pool) for _ in 1:3]
@assert pids == repeat([myid()], 3)
foreach(pid -&gt; put!(pool, pid), pids)

addprocs(4)
worker_procs = workers()
push!.(Ref(pool), worker_procs)

pids = [take!(pool) for _ in 1:4*3]
@assert pids == repeat(worker_procs, 3)
foreach(pid -&gt; put!(pool, pid), pids)
rmprocs(worker_procs)

pids = [take!(pool) for _ in 1:3]
@assert pids == repeat([myid()], 3)
foreach(pid -&gt; put!(pool, pid), pids)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/oschulz/ParallelProcessingTools.jl/blob/4d633400545a1d4eba6cc0af8c028226b9744f74/src/workerpool.jl#L3-L67">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ParallelProcessingTools.MaxTriesExceeded" href="#ParallelProcessingTools.MaxTriesExceeded"><code>ParallelProcessingTools.MaxTriesExceeded</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">MaxTriesExceeded &lt;: Exception</code></pre><p>Exception thrown when a number of (re-)tries was exceeded.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/oschulz/ParallelProcessingTools.jl/blob/4d633400545a1d4eba6cc0af8c028226b9744f74/src/onworkers.jl#L15-L19">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ParallelProcessingTools.ModifyExisting" href="#ParallelProcessingTools.ModifyExisting"><code>ParallelProcessingTools.ModifyExisting</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">ModifyExisting() isa WriteMode</code></pre><p>Indicates that existing files should be modified.</p><p>Causes an error to be thrown if not all of the files exist already.</p><p>See <a href="#ParallelProcessingTools.WriteMode"><code>WriteMode</code></a> and <a href="#ParallelProcessingTools.write_files"><code>write_files</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/oschulz/ParallelProcessingTools.jl/blob/4d633400545a1d4eba6cc0af8c028226b9744f74/src/fileio.jl#L248-L256">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ParallelProcessingTools.NonZeroExitCode" href="#ParallelProcessingTools.NonZeroExitCode"><code>ParallelProcessingTools.NonZeroExitCode</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">ParallelProcessingTools.NonZeroExitCode(cmd::Cmd, exitcode::Integer) isa Exception</code></pre><p>Exception to indicate that a an external process running <code>cmd</code> failed with the given exit code (not equal zero).</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/oschulz/ParallelProcessingTools.jl/blob/4d633400545a1d4eba6cc0af8c028226b9744f74/src/states.jl#L3-L8">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ParallelProcessingTools.OnHTCondor" href="#ParallelProcessingTools.OnHTCondor"><code>ParallelProcessingTools.OnHTCondor</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">OnHTCondor(;
    n::Int = 1
    condor_flags::Cmd = _default_condor_flags()
    condor_settings::Dict{String,String} = Dict{String,String}()
    julia_flags::Cmd = _default_julia_flags()
    julia_depot::Vector{String} = DEPOT_PATH
    jobfile_dir = homedir()
    env::Dict{String,String} = Dict{String,String}()
    redirect_output::Bool = true
)</code></pre><p>Mode to add worker processes via HTCondor <code>condor_submit</code>.</p><p>Condor submit script and steering <code>.sh</code> files are stored in <code>jobfile_dir</code>.</p><p>Example:</p><pre><code class="language-julia-repl hljs">julia&gt; runmode = OnHTCondor(n = 10; condor_settings=Dict(&quot;universe&quot; =&gt; &quot;vanilla&quot;, &quot;+queue&quot; =&gt; &quot;short&quot;, &quot;request_memory&quot; =&gt; &quot;4GB&quot;))
task = runworkers(runmode)

julia&gt; runworkers(runmode)
[ Info: Submitting HTCondor job: `condor_submit /home/jiling/jl_rAHyFadwHa.sub`
Submitting job(s)..........
10 job(s) submitted to cluster 3198291.
[ Info: HTCondor job submitted: `condor_submit /home/jiling/jl_rAHyFadwHa.sub`
(nothing, 10)

julia&gt; sleep(10)

julia&gt; nworkers()
10</code></pre><p>Workers can also be started manually, use <a href="#ParallelProcessingTools.worker_start_command"><code>worker_start_command(runmode)</code></a> to get the <code>condor_submit</code> start command and run it from a separate process or so.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/oschulz/ParallelProcessingTools.jl/blob/4d633400545a1d4eba6cc0af8c028226b9744f74/src/htcondor.jl#L3-L41">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ParallelProcessingTools.OnLocalhost" href="#ParallelProcessingTools.OnLocalhost"><code>ParallelProcessingTools.OnLocalhost</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">OnLocalhost(;
    n::Integer = 1
    env::Dict{String,String} = Dict{String,String}()
    julia_flags::Cmd = _default_julia_flags()
    dir = pwd()
) isa DynamicAddProcsMode</code></pre><p>Mode that runs <code>n</code> worker processes on the current host.</p><p>Example:</p><pre><code class="language-julia hljs">runmode = OnLocalhost(n = 4)
task, n = runworkers(runmode)

Threads.@async begin
    wait(task)
    @info &quot;SLURM workers have terminated.&quot;
end

@wait_while nprocs()-1 &lt; n)</code></pre><p>Workers can also be started manually, use <a href="#ParallelProcessingTools.worker_start_command"><code>worker_start_command(runmode)</code></a> to get the system (shell) command and run it from a separate process or so.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/oschulz/ParallelProcessingTools.jl/blob/4d633400545a1d4eba6cc0af8c028226b9744f74/src/localhost.jl#L3-L30">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ParallelProcessingTools.OnSlurm" href="#ParallelProcessingTools.OnSlurm"><code>ParallelProcessingTools.OnSlurm</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">OnSlurm(;
    slurm_flags::Cmd = {defaults}
    julia_flags::Cmd = {defaults}
    dir = pwd()
    env::Dict{String,String} = Dict{String,String}()
    redirect_output::Bool = true
)</code></pre><p>Mode to add worker processes via SLURM <code>srun</code>.</p><p><code>srun</code> and Julia worker <code>julia</code> command line flags are inferred from SLURM environment variables (e.g. when inside of an <code>salloc</code> or batch job), as well as <code>slurm_flags</code> and <code>julia_flags</code>.</p><p>Workers are started with current directory set to <code>dir</code>.</p><p>Example:</p><pre><code class="language-julia hljs">runmode = OnSlurm(slurm_flags = `--ntasks=4 --cpus-per-task=8 --mem-per-cpu=8G`)
task = runworkers(runmode)

Threads.@async begin
    wait(task)
    @info &quot;SLURM workers have terminated.&quot;
end

@wait_while nprocs()-1 &lt; n</code></pre><p>Workers can also be started manually, use <a href="#ParallelProcessingTools.worker_start_command"><code>worker_start_command(runmode)</code></a> to get the <code>srun</code> start command and run it from a separate process or so.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/oschulz/ParallelProcessingTools.jl/blob/4d633400545a1d4eba6cc0af8c028226b9744f74/src/slurm.jl#L3-L37">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ParallelProcessingTools.RunProcsMode" href="#ParallelProcessingTools.RunProcsMode"><code>ParallelProcessingTools.RunProcsMode</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">abstract type ParallelProcessingTools.RunProcsMode</code></pre><p>Abstract supertype for worker process run modes.</p><p>Subtypes must implement:</p><ul><li><code>ParallelProcessingTools.runworkers(runmode::SomeRunProcsMode, manager::Distributed.AbstractClusterManager)</code></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/oschulz/ParallelProcessingTools.jl/blob/4d633400545a1d4eba6cc0af8c028226b9744f74/src/runworkers.jl#L77-L85">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ParallelProcessingTools.ThreadLocal" href="#ParallelProcessingTools.ThreadLocal"><code>ParallelProcessingTools.ThreadLocal</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">ThreadLocal{T} &lt;: AbstractThreadLocal{T}</code></pre><p>Represents a thread-local value. See <a href="#ParallelProcessingTools.AbstractThreadLocal"><code>AbstractThreadLocal</code></a> for the API.</p><p>Constructors:</p><pre><code class="language-julia hljs">ThreadLocal{T}() where {T}
ThreadLocal(value::T) where {T}
ThreadLocal{T}(f::Base.Callable) where {T}</code></pre><p>Examples:</p><pre><code class="language-julia hljs">tlvalue = ThreadLocal(0)
@onthreads allthreads() tlvalue[] = Base.Threads.threadid()
getallvalues(tlvalue) == allthreads()</code></pre><pre><code class="language-julia hljs">rand_value_on_each_thread = ThreadLocal{Float64}(rand)
all(x -&gt; 0 &lt; x &lt; 1, getallvalues(rand_value_on_each_thread))</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/oschulz/ParallelProcessingTools.jl/blob/4d633400545a1d4eba6cc0af8c028226b9744f74/src/threadlocal.jl#L51-L77">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ParallelProcessingTools.TimelimitExceeded" href="#ParallelProcessingTools.TimelimitExceeded"><code>ParallelProcessingTools.TimelimitExceeded</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">TimelimitExceeded &lt;: Exception</code></pre><p>Exception thrown something timed out.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/oschulz/ParallelProcessingTools.jl/blob/4d633400545a1d4eba6cc0af8c028226b9744f74/src/onworkers.jl#L4-L8">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ParallelProcessingTools.WriteMode" href="#ParallelProcessingTools.WriteMode"><code>ParallelProcessingTools.WriteMode</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">abstract type WriteMode</code></pre><p>Abstract type for write modes.</p><p>May be one of the following subtypes: <a href="#ParallelProcessingTools.CreateNew"><code>CreateNew</code></a>, <a href="#ParallelProcessingTools.CreateOrIgnore"><code>CreateOrIgnore</code></a>, <a href="#ParallelProcessingTools.CreateOrReplace"><code>CreateOrReplace</code></a>, <a href="#ParallelProcessingTools.CreateOrModify"><code>CreateOrModify</code></a>, <a href="#ParallelProcessingTools.ModifyExisting"><code>ModifyExisting</code></a>.</p><p>Used by <a href="#ParallelProcessingTools.write_files"><code>write_files</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/oschulz/ParallelProcessingTools.jl/blob/4d633400545a1d4eba6cc0af8c028226b9744f74/src/fileio.jl#L128-L138">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ParallelProcessingTools.@always_everywhere-Tuple{Any}" href="#ParallelProcessingTools.@always_everywhere-Tuple{Any}"><code>ParallelProcessingTools.@always_everywhere</code></a> — <span class="docstring-category">Macro</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">@always_everywhere(expr)</code></pre><p>Runs <code>expr</code> on all current Julia processes, but also all future Julia processes after an <a href="#ParallelProcessingTools.ensure_procinit"><code>ensure_procinit()</code></a>) when managed using a <a href="#ParallelProcessingTools.FlexWorkerPool"><code>FlexWorkerPool</code></a>.</p><p>Similar to <code>Distributed.everywhere</code>, but also stores <code>expr</code> so that <code>ensure_procinit</code> can execute it on future worker processes.</p><p>Example:</p><pre><code class="language-julia hljs">@always_everywhere begin
    using SomePackage
    using SomeOtherPackage
    
    some_global_variable = 42
end</code></pre><p>See also <a href="#ParallelProcessingTools.add_procinit_code-Tuple{Any}"><code>ParallelProcessingTools.add_procinit_code</code></a> and <a href="#ParallelProcessingTools.ensure_procinit"><code>ParallelProcessingTools.ensure_procinit</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/oschulz/ParallelProcessingTools.jl/blob/4d633400545a1d4eba6cc0af8c028226b9744f74/src/procinit.jl#L378-L401">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ParallelProcessingTools.@critical-Tuple{Any}" href="#ParallelProcessingTools.@critical-Tuple{Any}"><code>ParallelProcessingTools.@critical</code></a> — <span class="docstring-category">Macro</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">@critical expr</code></pre><p>Mark code in <code>expr</code> as a critical section. Code in critical sections will never be executed in parallel (via multithreading) to any other critical section.</p><p><code>@critical</code> is very useful to mark non-threadsafe code.</p><p>Example:</p><pre><code class="language-julia hljs">@onthreads allthreads() begin
    @critical @info Base.Threads.threadid()
end

Without `@critical`, the above will typically crash Julia.</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/oschulz/ParallelProcessingTools.jl/blob/4d633400545a1d4eba6cc0af8c028226b9744f74/src/threadsafe.jl#L68-L86">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ParallelProcessingTools.@mt_out_of_order-Tuple{Any}" href="#ParallelProcessingTools.@mt_out_of_order-Tuple{Any}"><code>ParallelProcessingTools.@mt_out_of_order</code></a> — <span class="docstring-category">Macro</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">@mt_out_of_order begin expr... end</code></pre><p>Runs all top-level expressions in <code>begin expr... end</code> on parallel multi-threaded tasks.</p><p>Example:</p><p>``` @mt<em>out</em>of_order begin     a = foo()     bar()     c = baz() end</p><p>will run <code>a = foo()</code>, <code>bar()</code> and <code>c = baz()</code> in parallel and in arbitrary order, results of assignments will appear in the outside scope.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/oschulz/ParallelProcessingTools.jl/blob/4d633400545a1d4eba6cc0af8c028226b9744f74/src/onthreads.jl#L110-L127">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ParallelProcessingTools.@onprocs-Tuple{Any, Any}" href="#ParallelProcessingTools.@onprocs-Tuple{Any, Any}"><code>ParallelProcessingTools.@onprocs</code></a> — <span class="docstring-category">Macro</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">@onprocs procsel expr</code></pre><p>Executes <code>expr</code> in parallel on all processes in <code>procsel</code>. Waits until all processes are done. Returns all results as a vector (or as a single scalar value, if <code>procsel</code> itself is a scalar).</p><p>Example:</p><pre><code class="language-julia hljs">using Distributed
addprocs(2)
workers() == @onprocs workers() myid()</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/oschulz/ParallelProcessingTools.jl/blob/4d633400545a1d4eba6cc0af8c028226b9744f74/src/onprocs.jl#L10-L24">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ParallelProcessingTools.@onthreads-Tuple{Any, Any}" href="#ParallelProcessingTools.@onthreads-Tuple{Any, Any}"><code>ParallelProcessingTools.@onthreads</code></a> — <span class="docstring-category">Macro</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">@onthreads threadsel expr</code></pre><p>Execute code in <code>expr</code> in parallel on the threads in <code>threadsel</code>.</p><p><code>threadsel</code> should be a single thread-ID or a range (or array) of thread-ids. If <code>threadsel == Base.Threads.threadid()</code>, <code>expr</code> is run on the current tread with only minimal overhead.</p><p>Example 1:</p><pre><code class="language-juliaexpr hljs">tlsum = ThreadLocal(0.0)
data = rand(100)
@onthreads allthreads() begin
    tlsum[] = sum(workpart(data, allthreads(), Base.Threads.threadid()))
end
sum(getallvalues(tlsum)) ≈ sum(data)</code></pre><p>Example 2:</p><pre><code class="language-julia hljs"># Assuming 4 threads:
tl = ThreadLocal(42)
threadsel = 2:3
@onthreads threadsel begin
    tl[] = Base.Threads.threadid()
end
getallvalues(tl)[threadsel] == [2, 3]
getallvalues(tl)[[1,4]] == [42, 42]</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/oschulz/ParallelProcessingTools.jl/blob/4d633400545a1d4eba6cc0af8c028226b9744f74/src/onthreads.jl#L61-L93">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ParallelProcessingTools.@return_exceptions-Tuple{Any}" href="#ParallelProcessingTools.@return_exceptions-Tuple{Any}"><code>ParallelProcessingTools.@return_exceptions</code></a> — <span class="docstring-category">Macro</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">@return_exceptions expr</code></pre><p>Runs <code>expr</code> and catches and returns exceptions as values instead of having them thrown.</p><p>Useful for user-side debugging, especially of parallel and/or remote code execution.</p><p>See also <a href="#ParallelProcessingTools.@userfriendly_exceptions-Tuple{Any}"><code>@userfriendly_exceptions</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/oschulz/ParallelProcessingTools.jl/blob/4d633400545a1d4eba6cc0af8c028226b9744f74/src/exceptions.jl#L71-L81">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ParallelProcessingTools.@userfriendly_exceptions-Tuple{Any}" href="#ParallelProcessingTools.@userfriendly_exceptions-Tuple{Any}"><code>ParallelProcessingTools.@userfriendly_exceptions</code></a> — <span class="docstring-category">Macro</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">@userfriendly_exceptions expr</code></pre><p>Transforms exceptions originating from <code>expr</code> into more user-friendly ones.</p><p>If multiple exceptions originate from parallel code in <code>expr</code>, only one is rethrown, and <code>TaskFailedException</code>s and <code>RemoteException</code>s are replaced by the original exceptions that caused them.</p><p>See [<code>inner_exception</code>] and <a href="#ParallelProcessingTools.onlyfirst_exception"><code>onlyfirst_exception</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/oschulz/ParallelProcessingTools.jl/blob/4d633400545a1d4eba6cc0af8c028226b9744f74/src/exceptions.jl#L48-L58">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ParallelProcessingTools.@wait_while-Tuple" href="#ParallelProcessingTools.@wait_while-Tuple"><code>ParallelProcessingTools.@wait_while</code></a> — <span class="docstring-category">Macro</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">@wait_while [maxtime=nothing] [timeout_error=false] cond</code></pre><p>Wait while <code>cond</code> is true, using slowly increasing sleep times in between evaluating <code>cond</code>.</p><p><code>cond</code> may be an arbitrary Julia expression.</p><p>If <code>maxtime</code> is given with an real value, will only wait for <code>maxtime</code> seconds, if the value is zero or negative will not wait at all.</p><p>If <code>timeout_error</code> is <code>true</code>, will throw a <code>TimelimitExceeded</code> exception if the maximum waiting time is exceeded.</p><p>Example, wait for a task with a maxtime:</p><pre><code class="language-julia hljs">task = Threads.@spawn sleep(10)
timer = Timer(2)
@wait_while !istaskdone(task) &amp;&amp; isopen(timer)
istaskdone(task) == false</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/oschulz/ParallelProcessingTools.jl/blob/4d633400545a1d4eba6cc0af8c028226b9744f74/src/waiting.jl#L69-L91">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ParallelProcessingTools.add_procinit_code-Tuple{Any}" href="#ParallelProcessingTools.add_procinit_code-Tuple{Any}"><code>ParallelProcessingTools.add_procinit_code</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">ParallelProcessingTools.add_procinit_code(expr; run_everywhere::Bool = false)</code></pre><p>Add <code>expr</code> to process init code. <code>expr</code> is run on the current proccess immediately, but not automatically on remote processes unless <code>run_everywhere</code> is <code>true</code>.</p><p>User code should typically not need to call this function, but should use <a href="#ParallelProcessingTools.@always_everywhere-Tuple{Any}"><code>@always_everywhere</code></a> instead.</p><p>See also <a href="#ParallelProcessingTools.get_procinit_code-Tuple{}"><code>ParallelProcessingTools.get_procinit_code</code></a> and <a href="#ParallelProcessingTools.ensure_procinit"><code>ParallelProcessingTools.ensure_procinit</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/oschulz/ParallelProcessingTools.jl/blob/4d633400545a1d4eba6cc0af8c028226b9744f74/src/procinit.jl#L175-L187">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ParallelProcessingTools.allprocs_management_lock-Tuple{}" href="#ParallelProcessingTools.allprocs_management_lock-Tuple{}"><code>ParallelProcessingTools.allprocs_management_lock</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">ParallelProcessingTools.allprocs_management_lock()::ReentrantLock</code></pre><p>Returns the global process operations lock. This lock is used to protect operations that concern the management of all processes.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/oschulz/ParallelProcessingTools.jl/blob/4d633400545a1d4eba6cc0af8c028226b9744f74/src/procinit.jl#L22-L27">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ParallelProcessingTools.allthreads-Tuple{}" href="#ParallelProcessingTools.allthreads-Tuple{}"><code>ParallelProcessingTools.allthreads</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">allthreads()</code></pre><p>Convencience function, returns an equivalent of <code>1:Base.Threads.nthreads()</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/oschulz/ParallelProcessingTools.jl/blob/4d633400545a1d4eba6cc0af8c028226b9744f74/src/onthreads.jl#L52-L56">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ParallelProcessingTools.clear_worker_caches!" href="#ParallelProcessingTools.clear_worker_caches!"><code>ParallelProcessingTools.clear_worker_caches!</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">clear_worker_caches!(pool::AbstractWorkerPool)</code></pre><p>Clear the worker caches (cached function closures, etc.) on the workers In <code>pool</code>.</p><p>Does nothing if the pool doesn&#39;t perform any on-worker caching.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/oschulz/ParallelProcessingTools.jl/blob/4d633400545a1d4eba6cc0af8c028226b9744f74/src/workerpool.jl#L323-L330">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ParallelProcessingTools.current_procinit_level-Tuple{}" href="#ParallelProcessingTools.current_procinit_level-Tuple{}"><code>ParallelProcessingTools.current_procinit_level</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">ParallelProcessingTools.current_procinit_level()</code></pre><p>Return the init level of the current process.</p><p>See also <a href="#ParallelProcessingTools.global_procinit_level-Tuple{}"><code>global_procinit_level</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/oschulz/ParallelProcessingTools.jl/blob/4d633400545a1d4eba6cc0af8c028226b9744f74/src/procinit.jl#L83-L89">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ParallelProcessingTools.default_cache_dir!-Tuple{AbstractString}" href="#ParallelProcessingTools.default_cache_dir!-Tuple{AbstractString}"><code>ParallelProcessingTools.default_cache_dir!</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">ParallelProcessingTools.default_cache_dir!(dir::AbstractString)</code></pre><p>Sets the default cache directory to <code>dir</code> and returns it.</p><p>See also <a href="#ParallelProcessingTools.default_cache_dir!-Tuple{AbstractString}"><code>default_cache_dir!</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/oschulz/ParallelProcessingTools.jl/blob/4d633400545a1d4eba6cc0af8c028226b9744f74/src/fileio.jl#L112-L118">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ParallelProcessingTools.default_cache_dir-Tuple{}" href="#ParallelProcessingTools.default_cache_dir-Tuple{}"><code>ParallelProcessingTools.default_cache_dir</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">ParallelProcessingTools.default_cache_dir()::String</code></pre><p>Returns the default cache directory, e.g. for <a href="#ParallelProcessingTools.write_files"><code>write_files</code></a> and <code>read_files</code>(@ref).</p><p>See also <a href="#ParallelProcessingTools.default_cache_dir!-Tuple{AbstractString}"><code>default_cache_dir!</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/oschulz/ParallelProcessingTools.jl/blob/4d633400545a1d4eba6cc0af8c028226b9744f74/src/fileio.jl#L86-L93">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ParallelProcessingTools.ensure_procinit" href="#ParallelProcessingTools.ensure_procinit"><code>ParallelProcessingTools.ensure_procinit</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">ensure_procinit(pid::Int)
ensure_procinit(pids::AbstractVector{Int} = workers())</code></pre><p>Run process initialization code on the given process(es) if necessary, returns after initialization is complete.</p><p>When using a <a href="#ParallelProcessingTools.FlexWorkerPool"><code>FlexWorkerPool</code></a>, worker initialization can safely be run in the background though, as the pool will only offer workers (via <code>take!(pool)</code>) after it has fully initialized them.</p><p>See also <a href="#ParallelProcessingTools.get_procinit_code-Tuple{}"><code>ParallelProcessingTools.get_procinit_code</code></a> and <a href="#ParallelProcessingTools.add_procinit_code-Tuple{Any}"><code>ParallelProcessingTools.add_procinit_code</code></a>.</p><p>See also <a href="#ParallelProcessingTools.get_procinit_code-Tuple{}"><code>ParallelProcessingTools.get_procinit_code</code></a>, <a href="#ParallelProcessingTools.ensure_procinit"><code>ParallelProcessingTools.ensure_procinit</code></a>, <a href="#ParallelProcessingTools.global_procinit_level-Tuple{}"><code>ParallelProcessingTools.global_procinit_level</code></a> and <a href="#ParallelProcessingTools.current_procinit_level-Tuple{}"><code>ParallelProcessingTools.current_procinit_level</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/oschulz/ParallelProcessingTools.jl/blob/4d633400545a1d4eba6cc0af8c028226b9744f74/src/procinit.jl#L280-L298">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ParallelProcessingTools.ensure_procinit_or_kill" href="#ParallelProcessingTools.ensure_procinit_or_kill"><code>ParallelProcessingTools.ensure_procinit_or_kill</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">ParallelProcessingTools.ensure_procinit_or_kill(pid::Int)
ParallelProcessingTools.ensure_procinit_or_kill(pids::AbstractVector{Int} = workers())</code></pre><p>Run process initialization code on the given process(es) if necessary, kill and remove process(es) for which initialization fails.</p><p>See also <a href="#ParallelProcessingTools.ensure_procinit"><code>ParallelProcessingTools.ensure_procinit</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/oschulz/ParallelProcessingTools.jl/blob/4d633400545a1d4eba6cc0af8c028226b9744f74/src/procinit.jl#L349-L357">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ParallelProcessingTools.get_procinit_code-Tuple{}" href="#ParallelProcessingTools.get_procinit_code-Tuple{}"><code>ParallelProcessingTools.get_procinit_code</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">ParallelProcessingTools.get_procinit_code()</code></pre><p>Returns the code that should be run on each process to ensure that desired packages are loaded and global variable are set up as expected.</p><p>See also <a href="#ParallelProcessingTools.add_procinit_code-Tuple{Any}"><code>ParallelProcessingTools.add_procinit_code</code></a> and <a href="#ParallelProcessingTools.ensure_procinit"><code>ParallelProcessingTools.ensure_procinit</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/oschulz/ParallelProcessingTools.jl/blob/4d633400545a1d4eba6cc0af8c028226b9744f74/src/procinit.jl#L124-L132">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ParallelProcessingTools.getallvalues" href="#ParallelProcessingTools.getallvalues"><code>ParallelProcessingTools.getallvalues</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">getallvalues(v::AbstractThreadLocal{T})::AbstractVector{T}</code></pre><p>Access the all values (one for each thread) of a thread-local value as a vector. Can only be called in single-threaded code sections.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/oschulz/ParallelProcessingTools.jl/blob/4d633400545a1d4eba6cc0af8c028226b9744f74/src/threadlocal.jl#L34-L39">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ParallelProcessingTools.getlabel" href="#ParallelProcessingTools.getlabel"><code>ParallelProcessingTools.getlabel</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">ParallelProcessingTools.getlabel(obj)</code></pre><p>Returns a descriptive label for <code>obj</code> suitable for using in exceptions and logging messages. Defaults to <code>string(obj)</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/oschulz/ParallelProcessingTools.jl/blob/4d633400545a1d4eba6cc0af8c028226b9744f74/src/states.jl#L21-L26">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ParallelProcessingTools.getlocalvalue" href="#ParallelProcessingTools.getlocalvalue"><code>ParallelProcessingTools.getlocalvalue</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">getlocalvalue(x::Any) = x
getlocalvalue(x::ThreadLocal) = x[]</code></pre><p>Access plain values and thread-local values in a unified fashion.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/oschulz/ParallelProcessingTools.jl/blob/4d633400545a1d4eba6cc0af8c028226b9744f74/src/threadlocal.jl#L24-L29">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ParallelProcessingTools.global_procinit_level-Tuple{}" href="#ParallelProcessingTools.global_procinit_level-Tuple{}"><code>ParallelProcessingTools.global_procinit_level</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">ParallelProcessingTools.global_procinit_level()</code></pre><p>Return the global process init level.</p><p>Returns, e.g., the number of times <a href="#ParallelProcessingTools.add_procinit_code-Tuple{Any}"><code>add_procinit_code</code></a> resp. <a href="#ParallelProcessingTools.@always_everywhere-Tuple{Any}"><code>@always_everywhere</code></a> have been called.</p><p>See also <a href="#ParallelProcessingTools.current_procinit_level-Tuple{}"><code>current_procinit_level</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/oschulz/ParallelProcessingTools.jl/blob/4d633400545a1d4eba6cc0af8c028226b9744f74/src/procinit.jl#L102-L111">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ParallelProcessingTools.hasfailed" href="#ParallelProcessingTools.hasfailed"><code>ParallelProcessingTools.hasfailed</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">ParallelProcessingTools.hasfailed(obj)::Bool</code></pre><p>Checks if <code>obj</code> has failed in some way.</p><p>Supports <code>Task</code> and <code>Process</code> and may be extended to other object types.</p><p>Returns <code>false</code> if <code>isnothing(obj)</code> or <code>ismissing(obj)</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/oschulz/ParallelProcessingTools.jl/blob/4d633400545a1d4eba6cc0af8c028226b9744f74/src/states.jl#L81-L89">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ParallelProcessingTools.idle_sleep-Tuple{Integer, Real, Real}" href="#ParallelProcessingTools.idle_sleep-Tuple{Integer, Real, Real}"><code>ParallelProcessingTools.idle_sleep</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">idle_sleep(n_idle::Integer, t_interval_s, t_max_s)</code></pre><p>Sleep because something has been idle for <code>n_idle</code> times.</p><p>Will sleep for <code>log2(n_idle + 1) * t_interval_s</code> seconds, but at most for <code>t_max_s</code> seconds.</p><p>Guaranteed <code>yield()</code> at least once, even if <code>n_idle</code> is zero.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/oschulz/ParallelProcessingTools.jl/blob/4d633400545a1d4eba6cc0af8c028226b9744f74/src/waiting.jl#L51-L60">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ParallelProcessingTools.in_vscode_notebook-Tuple{}" href="#ParallelProcessingTools.in_vscode_notebook-Tuple{}"><code>ParallelProcessingTools.in_vscode_notebook</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">ParallelProcessingTools.in_vscode_notebook():Bool</code></pre><p>Test if running within a Visual Studio Code notebook.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/oschulz/ParallelProcessingTools.jl/blob/4d633400545a1d4eba6cc0af8c028226b9744f74/src/display.jl#L26-L30">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ParallelProcessingTools.inner_exception" href="#ParallelProcessingTools.inner_exception"><code>ParallelProcessingTools.inner_exception</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">ParallelProcessingTools.inner_exception(err)</code></pre><p>Replaces exceptions like a <code>TaskFailedException</code> or a <code>RemoteException</code> with their underlying cause. Leaves other exceptions unchanged.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/oschulz/ParallelProcessingTools.jl/blob/4d633400545a1d4eba6cc0af8c028226b9744f74/src/exceptions.jl#L3-L8">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ParallelProcessingTools.isactive" href="#ParallelProcessingTools.isactive"><code>ParallelProcessingTools.isactive</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">ParallelProcessingTools.isactive(obj)::Bool</code></pre><p>Checks if <code>obj</code> is still active, running or whatever applies to the type of <code>obj</code>.</p><p>Supports <code>Task</code>, <code>Process</code>, <code>Future</code>, <code>Channel</code>, <code>Timer</code>, <code>Base.AsyncCondition</code> and may be extended to other object types.</p><p>Returns <code>false</code> if <code>isnothing(obj)</code> and <code>true</code> if <code>ismissing(obj)</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/oschulz/ParallelProcessingTools.jl/blob/4d633400545a1d4eba6cc0af8c028226b9744f74/src/states.jl#L35-L45">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ParallelProcessingTools.isvalid_pid" href="#ParallelProcessingTools.isvalid_pid"><code>ParallelProcessingTools.isvalid_pid</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">isvalid_pid(pid::Int)::Bool</code></pre><p>Tests if <code>pid</code> is a valid Julia process ID.</p><p>Equivalent to <code>pid in Distributed.procs()</code>, but faster.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/oschulz/ParallelProcessingTools.jl/blob/4d633400545a1d4eba6cc0af8c028226b9744f74/src/procinit.jl#L4-L10">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ParallelProcessingTools.memory_limit" href="#ParallelProcessingTools.memory_limit"><code>ParallelProcessingTools.memory_limit</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">memory_limit()</code></pre><p>Gets the virtual memory limit for the current Julia process.</p><p>Returns a tuple <code>(soft_limit::Int64, hard_limit::Int64)</code> (in units of bytes). Values of <code>-1</code> mean unlimited. </p><div class="admonition is-info" id="Note-a5916aa9868b9b46"><header class="admonition-header">Note<a class="admonition-anchor" href="#Note-a5916aa9868b9b46" title="Permalink"></a></header><div class="admonition-body"><p>Currently only works on Linux, simply returns <code>(Int64(-1), Int64(-1))</code> on other operationg systems.</p></div></div></div><a class="docs-sourcelink" target="_blank" href="https://github.com/oschulz/ParallelProcessingTools.jl/blob/4d633400545a1d4eba6cc0af8c028226b9744f74/src/memory.jl#L14-L25">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ParallelProcessingTools.memory_limit!" href="#ParallelProcessingTools.memory_limit!"><code>ParallelProcessingTools.memory_limit!</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">memory_limit!(soft_limit::Integer, hard_limit::Integer = -1)</code></pre><p>Sets the virtual memory limit for the current Julia process.</p><p><code>soft_limit</code> and <code>hard_limit</code> are in units of bytes. Values of <code>-1</code> mean unlimited. <code>hard_limit</code> must not be stricter than <code>soft_limit</code>, and should typically be set to <code>-1</code>.</p><p>Returns <code>(soft_limit::Int64, hard_limit::Int64)</code>.</p><div class="admonition is-info" id="Note-e65fa6e85a6d475d"><header class="admonition-header">Note<a class="admonition-anchor" href="#Note-e65fa6e85a6d475d" title="Permalink"></a></header><div class="admonition-body"><p>Currently only has an effect on Linux, does nothing and simply returns <code>(Int64(-1), Int64(-1))</code> on other operating systems.</p></div></div></div><a class="docs-sourcelink" target="_blank" href="https://github.com/oschulz/ParallelProcessingTools.jl/blob/4d633400545a1d4eba6cc0af8c028226b9744f74/src/memory.jl#L43-L57">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ParallelProcessingTools.onlyfirst_exception" href="#ParallelProcessingTools.onlyfirst_exception"><code>ParallelProcessingTools.onlyfirst_exception</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">ParallelProcessingTools.onlyfirst_exception(err)</code></pre><p>Replaces <code>CompositeException</code>s with their first exception.</p><p>Also employs <code>inner_exception</code> if <code>simplify</code> is <code>true</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/oschulz/ParallelProcessingTools.jl/blob/4d633400545a1d4eba6cc0af8c028226b9744f74/src/exceptions.jl#L34-L40">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ParallelProcessingTools.onworker" href="#ParallelProcessingTools.onworker"><code>ParallelProcessingTools.onworker</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">onworker(
    f::Function, args...;
    pool::AbstractWorkerPool = ppt_worker_pool(),
    maxtime::Real = 0, tries::Integer = 1, label::AbstractString = &quot;&quot;
)</code></pre><p>Runs <code>f(args...)</code> on an available worker process from the given <code>pool</code> and returns the result.</p><p>If <code>maxtime &gt; 0</code>, a maximum time for the activity is set. If the activity takes longer than <code>maxtime</code> seconds, the process running it (if not the main process) will be terminated.</p><p><code>label</code> is used for debug-logging.</p><p>If a problem occurs (maxtime or worker failure) while running the activity, reschedules the task if the maximum number of tries has not yet been reached, otherwise throws an exception.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/oschulz/ParallelProcessingTools.jl/blob/4d633400545a1d4eba6cc0af8c028226b9744f74/src/onworkers.jl#L33-L52">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ParallelProcessingTools.original_exception" href="#ParallelProcessingTools.original_exception"><code>ParallelProcessingTools.original_exception</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">ParallelProcessingTools.original_exception(err)</code></pre><p>Replaces (possibly nested) exceptions like a <code>TaskFailedException</code> or <code>RemoteException</code>s with the innermost exception, likely to be the one that was thrown originally. Leaves other exceptions unchanged.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/oschulz/ParallelProcessingTools.jl/blob/4d633400545a1d4eba6cc0af8c028226b9744f74/src/exceptions.jl#L18-L24">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ParallelProcessingTools.ppt_cluster_manager" href="#ParallelProcessingTools.ppt_cluster_manager"><code>ParallelProcessingTools.ppt_cluster_manager</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">ParallelProcessingTools.ppt_cluster_manager()
ParallelProcessingTools.ppt_cluster_manager(manager::ClusterManager)</code></pre><p>Get the default ParallelProcessingTools cluster manager.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/oschulz/ParallelProcessingTools.jl/blob/4d633400545a1d4eba6cc0af8c028226b9744f74/src/runworkers.jl#L123-L128">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ParallelProcessingTools.ppt_cluster_manager!-Tuple{ElasticClusterManager.ElasticManager}" href="#ParallelProcessingTools.ppt_cluster_manager!-Tuple{ElasticClusterManager.ElasticManager}"><code>ParallelProcessingTools.ppt_cluster_manager!</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">ParallelProcessingTools.ppt_cluster_manager!(manager::ElasticClusterManager.ElasticManager)</code></pre><p>Set the default ParallelProcessingTools cluster manager.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/oschulz/ParallelProcessingTools.jl/blob/4d633400545a1d4eba6cc0af8c028226b9744f74/src/runworkers.jl#L143-L147">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ParallelProcessingTools.ppt_worker_pool!-Tuple{FlexWorkerPool}" href="#ParallelProcessingTools.ppt_worker_pool!-Tuple{FlexWorkerPool}"><code>ParallelProcessingTools.ppt_worker_pool!</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">ppt_worker_pool!(wp::FlexWorkerPool)</code></pre><p>Sets the default ParallelProcessingTools worker pool to <code>wp</code> and returns it.</p><p>See <a href="#ParallelProcessingTools.ppt_worker_pool-Tuple{}"><code>ppt_worker_pool()</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/oschulz/ParallelProcessingTools.jl/blob/4d633400545a1d4eba6cc0af8c028226b9744f74/src/workerpool.jl#L376-L382">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ParallelProcessingTools.ppt_worker_pool-Tuple{}" href="#ParallelProcessingTools.ppt_worker_pool-Tuple{}"><code>ParallelProcessingTools.ppt_worker_pool</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">ppt_worker_pool()</code></pre><p>Returns the default ParallelProcessingTools worker pool.</p><p>If the default instance doesn&#39;t exist yet, then a <code>FlexWorkerPool</code> will be created that initially contains <code>Distributed.myid()</code> as the only worker.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/oschulz/ParallelProcessingTools.jl/blob/4d633400545a1d4eba6cc0af8c028226b9744f74/src/workerpool.jl#L348-L355">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ParallelProcessingTools.printover-Tuple{Any, Any}" href="#ParallelProcessingTools.printover-Tuple{Any, Any}"><code>ParallelProcessingTools.printover</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">ParallelProcessingTools.printover(f_show::Function, io::IOBuffer)</code></pre><p>Runs <code>f_show(tmpio)</code> with an IO buffer, then clears the required number of lines on <code>io</code> (typically <code>stdout</code>) and prints the output over them.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/oschulz/ParallelProcessingTools.jl/blob/4d633400545a1d4eba6cc0af8c028226b9744f74/src/display.jl#L34-L39">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ParallelProcessingTools.proc_management_lock-Tuple{Integer}" href="#ParallelProcessingTools.proc_management_lock-Tuple{Integer}"><code>ParallelProcessingTools.proc_management_lock</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">ParallelProcessingTools.proc_management_lock(pid::Integer)::ReentrantLock</code></pre><p>Returns a process-specific lock. This lock is used to protect operations that concern the management process <code>pid</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/oschulz/ParallelProcessingTools.jl/blob/4d633400545a1d4eba6cc0af8c028226b9744f74/src/procinit.jl#L62-L67">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ParallelProcessingTools.read_files" href="#ParallelProcessingTools.read_files"><code>ParallelProcessingTools.read_files</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">function read_files(
    [f_read, ], filenames::AbstractString...;
    use_cache::Bool = true, cache_dir::AbstractString = default_cache_dir(),
    create_cachedir::Bool = true, delete_tmp_onerror::Bool=true,
    verbose::Bool = false
)</code></pre><p>Reads <code>filenames</code> in an atomic fashion (i.e. only if all <code>filenames</code> exist) on a best-effort basis (depending on the OS and file-system used).</p><p>If a reading function <code>f_read</code> is given, calls <code>f_read(filenames...)</code>. The return value of <code>f_read</code> is passed through.</p><p>If <code>use_cache</code> is <code>true</code>, then the files are first copied to the cache directory <code>cache_dir</code> under temporary names, and then read via <code>f_read(temporary_filenames...)</code>. The temporary files are deleted after <code>f_read</code> exits (except if an exception is thrown during reading and <code>delete_tmp_onerror</code> is set to <code>false</code>).</p><p>Set <code>ENV[&quot;JULIA_DEBUG&quot;] = &quot;ParallelProcessingTools&quot;</code> to see a log of all intermediate steps.</p><p>For example:</p><pre><code class="language-julia hljs">write(&quot;foo.txt&quot;, &quot;Hello&quot;); write(&quot;bar.txt&quot;, &quot;World&quot;)

result = read_files(&quot;foo.txt&quot;, &quot;bar.txt&quot;, use_cache = true) do foo, bar
    read(foo, String) * &quot; &quot; * read(bar, String)
end</code></pre><p>If no reading funcion <code>f_read</code> is given, then <code>read_files</code> returns an object of type <a href="#ParallelProcessingTools.FilesToRead"><code>FilesToRead</code></a> that holds the temporary filenames. Closing it will clean up temporary files, like described above. So</p><pre><code class="language-julia hljs">ftr = read_files(&quot;foo.txt&quot;, &quot;bar.txt&quot;; use_cache = true)
result = try
    foo, bar = collect(ftr)
    data_read = read(foo, String) * &quot; &quot; * read(bar, String)
    close(ftr)
    data_read
catch err
    close(ftr, err)
    rethrow()
end</code></pre><p>is equivalent to the example using <code>read_files(f_read, ...)</code>above.</p><p>If <code>create_cachedir</code> is <code>true</code>, then <code>cache_dir</code> will be created if it doesn&#39;t exist yet.</p><p>If <code>verbose</code> is <code>true</code>, uses log-level <code>Logging.Info</code> to log file reading, otherwise <code>Logging.Debug</code>.</p><p>On Linux you can set <code>use_cache = true</code> and <code>cache_dir = &quot;/dev/shm&quot;</code> to use the default Linux RAM disk as an intermediate directory.</p><p>See also <a href="#ParallelProcessingTools.write_files"><code>write_files</code></a> and <a href="#ParallelProcessingTools.default_cache_dir-Tuple{}"><code>ParallelProcessingTools.default_cache_dir</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/oschulz/ParallelProcessingTools.jl/blob/4d633400545a1d4eba6cc0af8c028226b9744f74/src/fileio.jl#L674-L738">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ParallelProcessingTools.runworkers" href="#ParallelProcessingTools.runworkers"><code>ParallelProcessingTools.runworkers</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">runworkers(
    runmode::ParallelProcessingTools.RunProcsMode
    manager::Distributed.AbstractClusterManager = ppt_cluster_manager()
)</code></pre><p>Run Julia worker processes.</p><p>By default ensures that all workers processes use the same Julia project environment as the current process (requires that file systems paths are consistenst across compute hosts).</p><p>The new workers are managed via <a href="#ParallelProcessingTools.ppt_cluster_manager"><code>ppt_cluster_manager()</code></a> and automatically added to the <a href="#ParallelProcessingTools.ppt_worker_pool-Tuple{}"><code>ppt_worker_pool()</code></a></p><p>Returns a tuple <code>(task, n)</code>. Here, <code>task::Task</code> is done when all workers have terminated. <code>n</code> is either an <code>Integer</code>, if the number of workers that will be started is known, or <code>Nothing</code>, if the number of workers can&#39;t be predicted (accurately).</p><p>Example:</p><pre><code class="language-julia hljs">task, n = runworkers(OnLocalhost(n = 4))</code></pre><p>See also <a href="#ParallelProcessingTools.worker_resources-Tuple{}"><code>worker_resources()</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/oschulz/ParallelProcessingTools.jl/blob/4d633400545a1d4eba6cc0af8c028226b9744f74/src/runworkers.jl#L89-L116">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ParallelProcessingTools.sleep_ns-Tuple{Integer}" href="#ParallelProcessingTools.sleep_ns-Tuple{Integer}"><code>ParallelProcessingTools.sleep_ns</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">sleep_ns(t_in_ns::Real)</code></pre><p>Sleep for <code>t_in_ns</code> nanoseconds, using a mixture of <code>yield()</code>, <code>sleep(0)</code> and <code>sleep(t)</code> to be able sleep for short times as well as long times with good relative precision.</p><p>Guaranteed to <code>yield()</code> at least once, even if <code>t_in_ns</code> is zero.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/oschulz/ParallelProcessingTools.jl/blob/4d633400545a1d4eba6cc0af8c028226b9744f74/src/waiting.jl#L12-L20">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ParallelProcessingTools.split_basename_ext-Tuple{AbstractString}" href="#ParallelProcessingTools.split_basename_ext-Tuple{AbstractString}"><code>ParallelProcessingTools.split_basename_ext</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">ParallelProcessingTools.split_basename_ext(file_basename_with_ext::AbstractString)</code></pre><p>Splits a filename (given without its directory path) into a basename without file extension and the file extension. Returns a tuple <code>(basename_noext, ext)</code>.</p><p>Example:</p><pre><code class="nohighlight hljs">ParallelProcessingTools.split_basename_ext(&quot;myfile.tar.gz&quot;) == (&quot;myfile&quot;, &quot;.tar.gz&quot;)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/oschulz/ParallelProcessingTools.jl/blob/4d633400545a1d4eba6cc0af8c028226b9744f74/src/fileio.jl#L3-L14">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ParallelProcessingTools.stopworkers" href="#ParallelProcessingTools.stopworkers"><code>ParallelProcessingTools.stopworkers</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">stopworkers()
stopworkers(pid::Int)
stopworkers(pids::AbstractVector{Int})</code></pre><p>Stops all or the specified worker processes. The current process is ignored.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/oschulz/ParallelProcessingTools.jl/blob/4d633400545a1d4eba6cc0af8c028226b9744f74/src/runworkers.jl#L300-L306">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ParallelProcessingTools.tmp_filename" href="#ParallelProcessingTools.tmp_filename"><code>ParallelProcessingTools.tmp_filename</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">ParallelProcessingTools.tmp_filename(fname::AbstractString)
ParallelProcessingTools.tmp_filename(fname::AbstractString, dir::AbstractString)</code></pre><p>Returns a temporary filename, based on <code>fname</code>.</p><p>By default, the temporary filename is in the same directory as <code>fname</code>, otherwise in <code>dir</code>.</p><p>Does <em>not</em> create the temporary file, only returns the filename (including directory path).</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/oschulz/ParallelProcessingTools.jl/blob/4d633400545a1d4eba6cc0af8c028226b9744f74/src/fileio.jl#L22-L33">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ParallelProcessingTools.wait_for_all" href="#ParallelProcessingTools.wait_for_all"><code>ParallelProcessingTools.wait_for_all</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">wait_for_all(
    objs...;
    maxtime::Union{Real,Nothing} = nothing, timeout_error::Bool = false
)

wait_for_all(objs::Union{Tuple,AbstractVector,Base.Generator,Base.ValueIterator}; kwargs...)</code></pre><p>Wait for all of the <code>objs</code> to become ready.</p><p>Readiness of objects is as defined by <a href="#ParallelProcessingTools.wouldwait"><code>wouldwait</code></a>. Objects that are <code>Nothing</code> are ignored, i.e. not waited for.</p><p>See <a href="#ParallelProcessingTools.@wait_while-Tuple"><code>@wait_while</code></a> for the effects of <code>maxtime</code> and <code>timeout_error</code>.</p><p>Example, wait for two tasks to finish:</p><pre><code class="language-julia hljs">task1 = Threads.@spawn sleep(10)
task2 = Threads.@spawn sleep(2)
wait_for_all(task1, task2)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/oschulz/ParallelProcessingTools.jl/blob/4d633400545a1d4eba6cc0af8c028226b9744f74/src/waiting.jl#L211-L233">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ParallelProcessingTools.wait_for_any" href="#ParallelProcessingTools.wait_for_any"><code>ParallelProcessingTools.wait_for_any</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">wait_for_any(
    objs...;
    maxtime::Union{Real,Nothing} = nothing, timeout_error::Bool = false
)

wait_for_all(objs::Union{Tuple,AbstractVector,Base.Generator,Base.ValueIterator}; kwargs...)</code></pre><p>Wait for any of the objects <code>objs</code> to become ready.</p><p>Readiness of objects is as defined by <a href="#ParallelProcessingTools.wouldwait"><code>wouldwait</code></a>. Objects that are <code>Nothing</code> are ignored, i.e. not waited for.</p><p>See <a href="#ParallelProcessingTools.@wait_while-Tuple"><code>@wait_while</code></a> for the effects of <code>maxtime</code> and <code>timeout_error</code>.</p><p>Example, wait for a task with a timeout:</p><pre><code class="language-julia hljs">task1 = Threads.@spawn sleep(1.0)
task2 = Threads.@spawn sleep(5.0)
wait_for_any(task1, task2, maxtime = 3.0)
istaskdone(task1) == true
istaskdone(task2) == false</code></pre><p>Similar to <code>waitany</code> (new in Julia v1.12), but applies to a wider range of object types.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/oschulz/ParallelProcessingTools.jl/blob/4d633400545a1d4eba6cc0af8c028226b9744f74/src/waiting.jl#L155-L182">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ParallelProcessingTools.whyfailed" href="#ParallelProcessingTools.whyfailed"><code>ParallelProcessingTools.whyfailed</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">ParallelProcessingTools.whyfailed(obj)::Exception</code></pre><p>Returns a reason, as an <code>Exception</code> instance, why <code>obj</code> has failed.</p><p>Supports <code>Task</code> and <code>Process</code> and may be extended to other object types.</p><p><code>obj</code> must not be <code>nothing</code> or <code>missing</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/oschulz/ParallelProcessingTools.jl/blob/4d633400545a1d4eba6cc0af8c028226b9744f74/src/states.jl#L110-L118">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ParallelProcessingTools.worker_local_startcmd-Tuple{Distributed.ClusterManager}" href="#ParallelProcessingTools.worker_local_startcmd-Tuple{Distributed.ClusterManager}"><code>ParallelProcessingTools.worker_local_startcmd</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">ParallelProcessingTools.worker_local_startcmd(
    manager::Distributed.ClusterManager;
    julia_cmd::Cmd = _default_julia_cmd(),
    julia_flags::Cmd = _default_julia_flags(),
    julia_project::AbstractString = _default_julia_project()
    redirect_output::Bool = true,
    env::AbstractDict{&lt;:AbstractString,&lt;:AbstractString} = ...,
)::Cmd</code></pre><p>Return the system command required to start a Julia worker process locally on some host, so that it will connect to <code>manager</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/oschulz/ParallelProcessingTools.jl/blob/4d633400545a1d4eba6cc0af8c028226b9744f74/src/runworkers.jl#L273-L285">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ParallelProcessingTools.worker_resources-Tuple{}" href="#ParallelProcessingTools.worker_resources-Tuple{}"><code>ParallelProcessingTools.worker_resources</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">worker_resources</code></pre><p>Get the distributed Julia worker process resources currently available.</p><p>This may take some time as some code needs to be loaded on all processes. Automatically runs <code>ensure_procinit()</code> before querying worker resources.</p><p>Note: CPU ID information will only be available if <a href="https://github.com/carstenbauer/ThreadPinning.jl"><code>ThreadPinning</code></a> is loaded.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/oschulz/ParallelProcessingTools.jl/blob/4d633400545a1d4eba6cc0af8c028226b9744f74/src/runworkers.jl#L41-L52">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ParallelProcessingTools.worker_start_command" href="#ParallelProcessingTools.worker_start_command"><code>ParallelProcessingTools.worker_start_command</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">worker_start_command(
    runmode::DynamicAddProcsMode,
    manager::ClusterManager = ParallelProcessingTools.ppt_cluster_manager()
)::Tuple{Cmd,Integer,Integer}</code></pre><p>Return a tuple <code>(cmd, m, n)</code>, with system command <code>cmd</code> that needs to be run <code>m</code> times (in parallel) to start <code>n</code> workers.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/oschulz/ParallelProcessingTools.jl/blob/4d633400545a1d4eba6cc0af8c028226b9744f74/src/runworkers.jl#L187-L195">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ParallelProcessingTools.workpart" href="#ParallelProcessingTools.workpart"><code>ParallelProcessingTools.workpart</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">workpart(data::AbstractArray, workersel::AbstractVector{W}, current_worker::W) where {W}</code></pre><p>Get the part of <code>data</code> that the execution unit <code>current_worker</code> is responsible for. Implies a partition of <code>data</code> across the workers listed in <code>workersel</code>.</p><p>For generic <code>data</code> arrays, <code>workpart</code> will return a view. If <code>data</code> is a <code>Range</code> (e.g. indices to be processed), a sub-range will be returned.</p><p>Type <code>W</code> will typically be <code>Int</code> and <code>workersel</code> will usually be a range/array of thread/process IDs.</p><p>Note: <code>workersel</code> is required to be sorted in ascending order and to contain no duplicate entries.</p><p>Examples:</p><pre><code class="language-julia hljs">using Distributed, Base.Threads
A = rand(100)
# ...
sub_A = workpart(A, workers(), myid())
# ...
idxs = workpart(eachindex(sub_A), allthreads(), threadid())
for i in idxs
    # ...
end</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/oschulz/ParallelProcessingTools.jl/blob/4d633400545a1d4eba6cc0af8c028226b9744f74/src/workpartition.jl#L62-L91">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ParallelProcessingTools.wouldwait" href="#ParallelProcessingTools.wouldwait"><code>ParallelProcessingTools.wouldwait</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">ParallelProcessingTools.wouldwait(obj)::Bool</code></pre><p>Returns <code>true</code> if <code>wait(obj)</code> would result in waiting and <code>false</code> if <code>wait(obj)</code> would return (almost) immediately.</p><p>Supports <code>Task</code>, <code>Process</code>, <code>Future</code>, <code>Channel</code>, <code>Timer</code>, <code>Base.AsyncCondition</code> and may be extended to other object types.</p><p>Returns <code>false</code> if <code>isnothing(obj)</code> but <code>obj</code> must not be <code>missing</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/oschulz/ParallelProcessingTools.jl/blob/4d633400545a1d4eba6cc0af8c028226b9744f74/src/states.jl#L58-L68">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ParallelProcessingTools.write_files" href="#ParallelProcessingTools.write_files"><code>ParallelProcessingTools.write_files</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">function write_files(
    [f_write,] filenames::AbstractString...;
    mode::WriteMode = CreateOrIgnore(),
    use_cache::Bool = false, cache_dir::AbstractString = default_cache_dir(),
    create_dirs::Bool = true, delete_tmp_onerror::Bool=true,
    verbose::Bool = false
)</code></pre><p>Writes to <code>filenames</code> in an atomic fashion, on a best-effort basis (depending on the OS and file-system used).</p><p><code>mode</code> determines how to handle pre-existing files, it may be <a href="#ParallelProcessingTools.CreateOrIgnore"><code>CreateOrIgnore()</code></a> (default), <a href="#ParallelProcessingTools.CreateNew"><code>CreateNew()</code></a>, <a href="#ParallelProcessingTools.CreateOrReplace"><code>CreateOrReplace()</code></a>, <a href="#ParallelProcessingTools.CreateOrModify"><code>CreateOrModify()</code></a> or <a href="#ParallelProcessingTools.ModifyExisting"><code>ModifyExisting()</code></a>.</p><p>If a writing function <code>f_write</code> is given, calls <code>f_create(temporary_filenames...)</code>. If <code>f_create</code> doesn&#39;t throw an exception, the files <code>temporary_filenames</code> are renamed to <code>filenames</code>, otherwise the temporary files are are either deleted (if <code>delete_tmp_onerror</code> is `true) or left in place (e.g. for debugging purposes).</p><p>Set <code>ENV[&quot;JULIA_DEBUG&quot;] = &quot;ParallelProcessingTools&quot;</code> to see a log of all intermediate steps.</p><p>For example:</p><pre><code class="language-julia hljs">write_files(&quot;foo.txt&quot;, &quot;bar.txt&quot;, use_cache = true) do tmp_foo, tmp_bar
    write(tmp_foo, &quot;Hello&quot;)
    write(tmp_bar, &quot;World&quot;)
end</code></pre><p><code>write_files(f_write, filenames...)</code> returns either <code>filenames</code>, if the files were (re-)written or <code>nothing</code> if there was nothing to do (depending on <code>mode</code>).</p><p>If no writing funcion <code>f_write</code> is given then, <code>write_files</code> returns an object of type <a href="#ParallelProcessingTools.FilesToWrite"><code>FilesToWrite</code></a> that holds the temporary filenames. Closing it will, like above, either rename temporary files to <code>filenames</code> or remove them. So</p><pre><code class="language-julia hljs">ftw = write_files(&quot;foo.txt&quot;, &quot;bar.txt&quot;)
if !isnothing(ftw)
    try
        foo, bar = ftw
        write(foo, &quot;Hello&quot;)
        write(bar, &quot;World&quot;)
        close(ftw)
    catch err
        close(ftw, err)
        rethrow()
    end
end</code></pre><p>is equivalent to the example using <code>write_files(f_write, ...)</code>above.</p><p>When modifying files, <code>write_files</code> first copies existing files <code>filenames</code> to <code>temporary_filenames</code> and otherwise behaves as described above.</p><p>If <code>use_cache</code> is <code>true</code>, the <code>temporary_filenames</code> are located in <code>cache_dir</code> and then atomically moved to <code>filenames</code>, otherwise they located next to <code>filenames</code> (so in the same directories).</p><p>If <code>create_dirs</code> is <code>true</code>, target and cache directory paths are created if necessary.</p><p>If <code>verbose</code> is <code>true</code>, uses log-level <code>Logging.Info</code> to log file creation, otherwise <code>Logging.Debug</code>.</p><p>On Linux you can set <code>use_cache = true</code> and <code>cache_dir = &quot;/dev/shm&quot;</code> to use the default Linux RAM disk as an intermediate directory.</p><p>See also <a href="#ParallelProcessingTools.read_files"><code>read_files</code></a> and <a href="#ParallelProcessingTools.default_cache_dir-Tuple{}"><code>ParallelProcessingTools.default_cache_dir</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/oschulz/ParallelProcessingTools.jl/blob/4d633400545a1d4eba6cc0af8c028226b9744f74/src/fileio.jl#L421-L500">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ParallelProcessingTools.write_worker_start_script" href="#ParallelProcessingTools.write_worker_start_script"><code>ParallelProcessingTools.write_worker_start_script</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">write_worker_start_script(
    filename::AbstractString,
    runmode::DynamicAddProcsMode,
    manager::ClusterManager = ParallelProcessingTools.ppt_cluster_manager()
)</code></pre><p>Writes the system command to start worker processes to a shell script.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/oschulz/ParallelProcessingTools.jl/blob/4d633400545a1d4eba6cc0af8c028226b9744f74/src/runworkers.jl#L202-L210">source</a></section></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../">« Home</a><a class="docs-footer-nextpage" href="../LICENSE/">LICENSE »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.14.1 on <span class="colophon-date" title="Tuesday 12 August 2025 15:15">Tuesday 12 August 2025</span>. Using Julia version 1.11.6.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
